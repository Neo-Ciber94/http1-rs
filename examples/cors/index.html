<html>
  <head>
    <title>🌹🪻 Flowers 🌻🌷</title>
    <meta charset="utf-8" />
    <style>
      .flower-color {
        display: inline-block;
        margin-right: 8px;
        width: 16px;
        height: 16px;
      }
    </style>
  </head>
  <body>
    <h1>🌸🌸 Flowers 🌸🌸</h1>
    <div id="flower-list">Loading...</div>

    <h2>New Flower</h2>
    <form method="post" action="http://localhost:5000/api/flowers">
      <input name="name" type="text" required />
      <input name="color" type="color" required />
      <br />
      <button>Add Flower</button>
    </form>
    <script>
      window.onload = () => {
        const flowersEl = document.getElementById("flower-list");

        fetch("http://localhost:5000/api/flowers")
          .then((res) => res.json())
          .then((flowers) => {
            console.log({ flowers });
            if (flowers.length === 0) {
              flowersEl.textContent = "No flowers available 🥀";
            } else {
              const listEl = document.createElement("ul");

              for (const flower of flowers) {
                const flowerEl = document.createElement("li");
                const colorEl = document.createElement("span");
                const textEl = document.createElement("span");

                colorEl.classList.add("flower-color");
                colorEl.style.backgroundColor = flower.color;
                textEl.textContent = flower.name;

                flowerEl.appendChild(colorEl);
                flowerEl.appendChild(textEl);
                listEl.appendChild(flowerEl);
              }

              flowersEl.replaceChildren(listEl);
            }
          })
          .catch((error) => {
            console.error("Error fetching users:", error);
            flowersEl.textContent = "❌ Failed to load flowers";
          });
      };
    </script>
  </body>
</html>
